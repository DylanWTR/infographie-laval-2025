#pragma once

#include "pipeline/primitives/primitive.hpp"

class Cube final : public Primitive {
    static constexpr float vertices[] = {
        // --- Back face (z = -1) ---
        // pos                u, v    normal          tangent
        -1.0f, -1.0f, -1.0f,  0.0f, 0.0f,   0.0f,  0.0f, -1.0f,   1.0f, 0.0f, 0.0f,
         1.0f, -1.0f, -1.0f,  1.0f, 0.0f,   0.0f,  0.0f, -1.0f,   1.0f, 0.0f, 0.0f,
         1.0f,  1.0f, -1.0f,  1.0f, 1.0f,   0.0f,  0.0f, -1.0f,   1.0f, 0.0f, 0.0f,

         1.0f,  1.0f, -1.0f,  1.0f, 1.0f,   0.0f,  0.0f, -1.0f,   1.0f, 0.0f, 0.0f,
        -1.0f,  1.0f, -1.0f,  0.0f, 1.0f,   0.0f,  0.0f, -1.0f,   1.0f, 0.0f, 0.0f,
        -1.0f, -1.0f, -1.0f,  0.0f, 0.0f,   0.0f,  0.0f, -1.0f,   1.0f, 0.0f, 0.0f,

        // --- Front face (z = 1) ---
        -1.0f, -1.0f,  1.0f,  0.0f, 0.0f,   0.0f,  0.0f,  1.0f,   1.0f, 0.0f, 0.0f,
         1.0f, -1.0f,  1.0f,  1.0f, 0.0f,   0.0f,  0.0f,  1.0f,   1.0f, 0.0f, 0.0f,
         1.0f,  1.0f,  1.0f,  1.0f, 1.0f,   0.0f,  0.0f,  1.0f,   1.0f, 0.0f, 0.0f,

         1.0f,  1.0f,  1.0f,  1.0f, 1.0f,   0.0f,  0.0f,  1.0f,   1.0f, 0.0f, 0.0f,
        -1.0f,  1.0f,  1.0f,  0.0f, 1.0f,   0.0f,  0.0f,  1.0f,   1.0f, 0.0f, 0.0f,
        -1.0f, -1.0f,  1.0f,  0.0f, 0.0f,   0.0f,  0.0f,  1.0f,   1.0f, 0.0f, 0.0f,

        // --- Left face (x = -1) ---
        -1.0f,  1.0f,  1.0f,  1.0f, 0.0f,  -1.0f,  0.0f,  0.0f,   0.0f, 0.0f, -1.0f,
        -1.0f,  1.0f, -1.0f,  1.0f, 1.0f,  -1.0f,  0.0f,  0.0f,   0.0f, 0.0f, -1.0f,
        -1.0f, -1.0f, -1.0f,  0.0f, 1.0f,  -1.0f,  0.0f,  0.0f,   0.0f, 0.0f, -1.0f,

        -1.0f, -1.0f, -1.0f,  0.0f, 1.0f,  -1.0f,  0.0f,  0.0f,   0.0f, 0.0f, -1.0f,
        -1.0f, -1.0f,  1.0f,  0.0f, 0.0f,  -1.0f,  0.0f,  0.0f,   0.0f, 0.0f, -1.0f,
        -1.0f,  1.0f,  1.0f,  1.0f, 0.0f,  -1.0f,  0.0f,  0.0f,   0.0f, 0.0f, -1.0f,

        // --- Right face (x = 1) ---
         1.0f,  1.0f,  1.0f,  1.0f, 0.0f,   1.0f,  0.0f,  0.0f,   0.0f, 0.0f,  1.0f,
         1.0f,  1.0f, -1.0f,  1.0f, 1.0f,   1.0f,  0.0f,  0.0f,   0.0f, 0.0f,  1.0f,
         1.0f, -1.0f, -1.0f,  0.0f, 1.0f,   1.0f,  0.0f,  0.0f,   0.0f, 0.0f,  1.0f,

         1.0f, -1.0f, -1.0f,  0.0f, 1.0f,   1.0f,  0.0f,  0.0f,   0.0f, 0.0f,  1.0f,
         1.0f, -1.0f,  1.0f,  0.0f, 0.0f,   1.0f,  0.0f,  0.0f,   0.0f, 0.0f,  1.0f,
         1.0f,  1.0f,  1.0f,  1.0f, 0.0f,   1.0f,  0.0f,  0.0f,   0.0f, 0.0f,  1.0f,

        // --- Bottom face (y = -1) ---
        -1.0f, -1.0f, -1.0f,  0.0f, 1.0f,   0.0f, -1.0f,  0.0f,   1.0f, 0.0f,  0.0f,
         1.0f, -1.0f, -1.0f,  1.0f, 1.0f,   0.0f, -1.0f,  0.0f,   1.0f, 0.0f,  0.0f,
         1.0f, -1.0f,  1.0f,  1.0f, 0.0f,   0.0f, -1.0f,  0.0f,   1.0f, 0.0f,  0.0f,

         1.0f, -1.0f,  1.0f,  1.0f, 0.0f,   0.0f, -1.0f,  0.0f,   1.0f, 0.0f,  0.0f,
        -1.0f, -1.0f,  1.0f,  0.0f, 0.0f,   0.0f, -1.0f,  0.0f,   1.0f, 0.0f,  0.0f,
        -1.0f, -1.0f, -1.0f,  0.0f, 1.0f,   0.0f, -1.0f,  0.0f,   1.0f, 0.0f,  0.0f,

        // --- Top face (y = 1) ---
        -1.0f,  1.0f, -1.0f,  0.0f, 1.0f,   0.0f,  1.0f,  0.0f,   1.0f, 0.0f,  0.0f,
         1.0f,  1.0f, -1.0f,  1.0f, 1.0f,   0.0f,  1.0f,  0.0f,   1.0f, 0.0f,  0.0f,
         1.0f,  1.0f,  1.0f,  1.0f, 0.0f,   0.0f,  1.0f,  0.0f,   1.0f, 0.0f,  0.0f,

         1.0f,  1.0f,  1.0f,  1.0f, 0.0f,   0.0f,  1.0f,  0.0f,   1.0f, 0.0f,  0.0f,
        -1.0f,  1.0f,  1.0f,  0.0f, 0.0f,   0.0f,  1.0f,  0.0f,   1.0f, 0.0f,  0.0f,
        -1.0f,  1.0f, -1.0f,  0.0f, 1.0f,   0.0f,  1.0f,  0.0f,   1.0f, 0.0f,  0.0f
    };

    unsigned _VAO = 0;
    unsigned _VBO = 0;

public:
    explicit Cube();

    [[nodiscard]] AABB getLocalBox() const override;

    void render(const glm::mat4 &view, const glm::mat4 &projection) override;

    void renderDepth(const Shader &shader) override;

    ~Cube() override;
};
